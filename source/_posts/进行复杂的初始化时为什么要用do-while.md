---
title: 进行复杂的初始化时为什么要用do-while
date: 2022-02-21 11:02:07
tags: 
categories: 笔记
---

`do-while(0)`这样的语句为什么存在？

在初始化线程池这样复杂的对象时，需要大量的内存分配工作以及其成员的初始化。如果是在C语言中，没有C++的析构函数，那么就应该在某一步出错时停止初始化，并进入销毁阶段。

为了避免写goto，我们可以将初始化代码放在`do-while(0)`中，这样可以使用`break`在任意出错位置跳出循环，进入销毁程序。

`do-while(0)`应该在宏定义中还有一种使用技巧，以前看到过，待补充，等找到了补上。
